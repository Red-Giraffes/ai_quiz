<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Quiz</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@latest/dist/umd/supabase.min.js"></script>
</head>
<body>
    <div id="quiz-container">
        <h1>AI Quiz</h1>
        <div id="question-container"></div>
        <button id="next">Next</button>
    </div>

    <div id="result"></div>
    <div id="leaderboard"></div>

    <script src="quiz.js"></script>
    <script>
        const supabaseUrl = 'https://airfdancdzkaxebikanm.supabase.co';
        const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFpcmZkYW5jZHprYXhlYmlrYW5tIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTE2NjQ0OTksImV4cCI6MjAwNzI0MDQ5OX0.GnIe2Zdg3d5Vv00a201j7GKilZ0pGicrcgDvRd5sPGM';
        const supabase = Supabase.createClient(supabaseUrl, supabaseAnonKey);

        async function submitQuiz() {
            // Assuming you've already calculated the score in your submitQuiz function
            const username = prompt("Enter your name for the leaderboard:");
            
            let { data, error } = await supabase
                .from('scores')
                .insert([{ name: username, score: score }]);
            
            if (error) {
                console.error("Error inserting score:", error);
            }
        }

        async function displayLeaderboard() {
            let { data, error } = await supabase
                .from('scores')
                .select('*')
                .order('score', { ascending: false })
                .limit(50);

            if (error) {
                console.error("Error fetching leaderboard:", error);
                return;
            }

            var leaderboardHtml = "<h2>Leaderboard</h2><ul>";
            for (let i = 0; i < data.length; i++) {
                leaderboardHtml += `<li>${data[i].name} - ${data[i].score}</li>`;
            }
            leaderboardHtml += "</ul>";

            document.getElementById("leaderboard").innerHTML = leaderboardHtml;
        }
    </script>
</body>
</html>
